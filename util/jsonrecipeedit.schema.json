{
  "$schema": "http://json-schema.org/draft-04/schema#",
  "title": "JSON Recipe Edit Schema",
  "description": "the schema definition for EzTerry's JSON Recipe Edit",
  "type": "array",
  "items": {
    "anyOf": [
      {
        "description": "comment",
        "type": "string"
      },
      {
        "description": "commands",
        "type": "object",
        "oneOf": [
          {
            "title": "Delete Recipe",
            "$ref": "#/definitions/deleteRecipe"
          },
          {
            "title": "Shaped Recipe",
            "$ref": "#/definitions/shapedRecipe"
          },
          {
            "title": "Shapeless Recipe",
            "$ref": "#/definitions/shapelessRecipe"
          },
          {
            "title": "Register Ore",
            "$ref": "#/definitions/registerOre"
          },
          {
            "title": "Delete Furnace",
            "$ref": "#/definitions/deleteFurnace"
          },
          {
            "title": "Add Furnace",
            "$ref": "#/definitions/addFurnace"
          }
        ]
      }
    ]
  },
  "definitions": {
    "deleteRecipe": {
      "properties": {
        "command": {
          "enum": [
            "delete recipe"
          ]
        },
        "item": {
          "description": "In Game item usually: <modid>:<item name>",
          "type": "string"
        },
        "meta": {
          "oneOf": [
            {
              "type": "integer"
            },
            {
              "enum": [
                "*"
              ]
            }
          ],
          "description": "ingredient id (default=0)"
        }
      },
      "required": [
        "command",
        "item"
      ],
      "additionalProperties": false
    },
    "shapedRecipe": {
      "properties": {
        "command": {
          "enum": [
            "shaped recipe"
          ]
        },
        "ingredients": {
          "description": "shapeless recipe",
          "type": "object",
          "$ref": "#/definitions/recipe ingredients"
        },
        "template": {
          "description": "recipe template",
          "type": "array",
          "items": {
            "oneOf": [
              {
                "type": "string",
                "pattern": "^[a-z ]{1,3}$"
              }
            ]
          },
          "minItems": 1,
          "maxItems": 3
        },
        "count": {
          "description": "size of the item stack to return [default = 1]",
          "type": "integer"
        },
        "result": {
          "description": "Crafted Item",
          "type": "array",
          "items": [
            {
              "type": "string",
              "description": "ingredient item"
            },
            {
              "type": "integer",
              "description": "ingredient meta (default=0)"
            },
            {
              "type": "string",
              "description": "nbt data"
            }
          ],
          "minItems": 1,
          "maxItems": 3
        },
        "mirrored": {
          "type": "boolean",
          "description": "Can the recipe be mirrored (default = true)"
        }
      },
      "required": [
        "command",
        "ingredients",
        "template",
        "result"
      ],
      "additionalProperties": false
    },
    "shapelessRecipe": {
      "properties": {
        "command": {
          "enum": [
            "shapeless recipe"
          ]
        },
        "ingredients": {
          "description": "shapeless recipe",
          "type": "object",
          "$ref": "#/definitions/recipe ingredients"
        },
        "result": {
          "description": "Crafted Item",
          "type": "array",
          "items": [
            {
              "type": "string",
              "description": "result item"
            },
            {
              "oneOf": [
                {
                  "type": "integer"
                },
                {
                  "enum": [
                    "*"
                  ]
                }
              ],
              "description": "result meta (default=0)"
            },
            {
              "type": "string",
              "description": "nbt data"
            }
          ],
          "minItems": 1,
          "maxItems": 3
        }
      },
      "required": [
        "command",
        "ingredients",
        "result"
      ],
      "additionalProperties": false
    },
    "registerOre": {
      "properties": {
        "command": {
          "enum": [
            "register ore"
          ]
        },
        "name": {
          "description": "Name of the ore dictionary entry",
          "type": "string"
        },
        "items": {
          "description": "List of items to add to this ore dictionary entry",
          "type": "array",
          "items": {
            "description": "Item entry",
            "type": "array",
            "items": [
              {
                "type": "string",
                "description": "ingredient item"
              },
              {
                "oneOf": [
                  {
                    "type": "integer"
                  },
                  {
                    "enum": [
                      "*"
                    ]
                  }
                ],
                "description": "ingredient meta (default=0)"
              }
            ],
            "minItems": 1,
            "maxItems": 2
          }
        }
      },
      "required": [
        "command",
        "name",
        "items"
      ],
      "additionalProperties": false
    },
    "recipe ingredients": {
      "patternProperties": {
        "^[a-z]$": {
          "oneOf": [
            {
              "description": "Ore dictionary entry",
              "type": "string"
            },
            {
              "description": "Item entry",
              "type": "array",
              "items": [
                {
                  "type": "string",
                  "description": "ingredient item"
                },
                {
                  "oneOf": [
                    {
                      "type": "integer"
                    },
                    {
                      "enum": [
                        "*"
                      ]
                    }
                  ],
                  "description": "ingredient meta (default=0)"
                }
              ],
              "minItems": 1,
              "maxItems": 2
            }
          ]
        }
      },
      "additionalProperties": false
    },
    "deleteFurnace": {
      "properties": {
        "command": {
          "enum": [
            "delete furnace"
          ]
        },
        "item": {
          "description": "In Game item usually: <modid>:<item name>",
          "type": "string"
        },
        "meta": {
          "oneOf": [
            {
              "type": "integer"
            },
            {
              "enum": [
                "*"
              ]
            }
          ],
          "description": "ingredient id (default=0)"
        }
      },
      "required": [
        "command",
        "item"
      ],
      "additionalProperties": false
    },
    "addFurnace": {
      "properties": {
        "command": {
          "enum": [
            "add furnace"
          ]
        },
        "count": {
          "type": "integer",
          "description": "Number of items that smelt per craft"
        },
        "output": {
          "description": "Crafted Item",
          "type": "array",
          "items": [
            {
              "type": "string",
              "description": "result item"
            },
            {
              "oneOf": [
                {
                  "type": "integer"
                },
                {
                  "enum": [
                    "*"
                  ]
                }
              ],
              "description": "result meta (default=0)"
            },
            {
              "type": "string",
              "description": "nbt data"
            }
          ],
          "minItems": 1,
          "maxItems": 3
        },
        "input": {
          "description": "Crafted Item",
          "type": "array",
          "items": [
            {
              "type": "string",
              "description": "result item"
            },
            {
              "oneOf": [
                {
                  "type": "integer"
                },
                {
                  "enum": [
                    "*"
                  ]
                }
              ],
              "description": "input meta (default=0)"
            }
          ],
          "minItems": 1,
          "maxItems": 2
        },
        "xp": {
          "type": "number",
          "description": "amount of XP to give 0.1 by default."
        }
      },
      "required": [
        "input",
        "output",
        "command"
      ],
      "additionalProperties": false
    }
  }
}